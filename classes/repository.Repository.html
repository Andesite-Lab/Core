<!DOCTYPE html><html class="default" lang="en" data-base="../"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Repository | @mrxsys/mrx-core</title><meta name="description" content="Documentation for @mrxsys/mrx-core"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => window.app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><a href="../index.html" class="title">@mrxsys/mrx-core</a><div id="tsd-toolbar-links"></div><button id="tsd-search-trigger" class="tsd-widget" aria-label="Search"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></button><dialog id="tsd-search" aria-label="Search"><input role="combobox" id="tsd-search-input" aria-controls="tsd-search-results" aria-autocomplete="list" aria-expanded="true" autocapitalize="off" autocomplete="off" placeholder="Search the docs" maxLength="100"/><ul role="listbox" id="tsd-search-results"></ul><div id="tsd-search-status" aria-live="polite" aria-atomic="true"><div>Preparing search index...</div></div></dialog><a href="#" class="tsd-widget menu" id="tsd-toolbar-menu-trigger" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb" aria-label="Breadcrumb"><li><a href="../modules/repository.html">repository</a></li><li><a href="" aria-current="page">Repository</a></li></ul><h1>Class Repository&lt;TModel&gt;</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>Provides a type-safe, extensible interface for database operations (CRUD, search, streaming) on a table.</p>
<ul>
<li>Wraps Knex.js for query building and execution.</li>
<li>Supports advanced search, pagination, field selection, and streaming.</li>
<li>Centralizes error handling for MSSQL.</li>
</ul>
</div><div class="tsd-comment tsd-typography"></div></section><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="tmodel"><span class="tsd-kind-type-parameter">TModel</span> = <span class="tsd-signature-type">unknown</span></span><div class="tsd-comment tsd-typography"><p>The data model type handled by the repository.</p>
<p>Example:</p>
<pre><code class="typescript"><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">repo</span><span class="hl-1"> = </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">Repository</span><span class="hl-1">&lt;</span><span class="hl-9">User</span><span class="hl-1">&gt;(</span><span class="hl-4">knex</span><span class="hl-1">, </span><span class="hl-4">userTable</span><span class="hl-1">);</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">repo</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({ </span><span class="hl-4">limit:</span><span class="hl-1"> </span><span class="hl-7">10</span><span class="hl-1"> });</span>
</code><button type="button">Copy</button></pre>

</div><div class="tsd-comment tsd-typography"></div></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L64">source/repository/repository.ts:64</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h5 class="tsd-index-heading uppercase">Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="#_knex" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>_<wbr/>knex</span></a>
<a href="#_table" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>_<wbr/>table</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="#_applysearch" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>apply<wbr/>Search</span></a>
<a href="#_executequery" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>execute<wbr/>Query</span></a>
<a href="#_handleerror" class="tsd-index-link tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>handle<wbr/>Error</span></a>
<a href="#count" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>count</span></a>
<a href="#delete" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>delete</span></a>
<a href="#find" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find</span></a>
<a href="#findone" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find<wbr/>One</span></a>
<a href="#findstream" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find<wbr/>Stream</span></a>
<a href="#insert" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>insert</span></a>
<a href="#update" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update</span></a>
</div></section></div></details></section></section><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Constructors</h2></summary><section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="constructor"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="constructorrepository"><span class="tsd-signature-keyword">new</span> <span class="tsd-kind-constructor-signature">Repository</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">knex</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Knex</span><span class="tsd-signature-symbol">,</span> <span class="tsd-kind-parameter">table</span><span class="tsd-signature-symbol">:</span> <a href="database.Table.html" class="tsd-signature-type tsd-kind-class">Table</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="" class="tsd-signature-type tsd-kind-class">Repository</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><a href="#constructorrepository" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a new <code>Repository</code> instance with the specified Knex.js instance and table object.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="constructorrepositorytmodel"><span class="tsd-kind-type-parameter">TModel</span> = <span class="tsd-signature-type">unknown</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">knex</span>: <span class="tsd-signature-type">Knex</span></span><div class="tsd-comment tsd-typography"><p>The Knex.js instance used to interact with the database.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">table</span>: <a href="database.Table.html" class="tsd-signature-type tsd-kind-class">Table</a></span><div class="tsd-comment tsd-typography"><p>The table object representing the database table to interact with.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="" class="tsd-signature-type tsd-kind-class">Repository</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L82">source/repository/repository.ts:82</a></li></ul></aside></div></li></ul></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Properties</h2></summary><section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="_knex"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>_<wbr/>knex</span><a href="#_knex" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">_knex</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Knex</span></div><div class="tsd-comment tsd-typography"><p>The Knex instance used for database operations.</p>
</div><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L68">source/repository/repository.ts:68</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="_table"><code class="tsd-tag">Protected</code> <code class="tsd-tag">Readonly</code><span>_<wbr/>table</span><a href="#_table" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">_table</span><span class="tsd-signature-symbol">:</span> <a href="database.Table.html" class="tsd-signature-type tsd-kind-class">Table</a></div><div class="tsd-comment tsd-typography"><p>The table associated with this repository.</p>
</div><div class="tsd-comment tsd-typography"><div class="tsd-tag-see"><h4 class="tsd-anchor-link" id="see">See<a href="#see" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p><a href="database.Table.html" class="tsd-kind-class">Table</a></p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L74">source/repository/repository.ts:74</a></li></ul></aside></section></section></details><details class="tsd-panel-group tsd-member-group tsd-accordion" open><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h2>Methods</h2></summary><section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="_applysearch"><code class="tsd-tag">Protected</code><span>_<wbr/>apply<wbr/>Search</span><a href="#_applysearch" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class=""><div class="tsd-signature tsd-anchor-link" id="_applysearch-1"><span class="tsd-kind-call-signature">_applySearch</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_applysearchkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">query</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">QueryBuilder</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">search</span><span class="tsd-signature-symbol">:</span> <a href="../types/repository_types.AdvancedSearch.html" class="tsd-signature-type tsd-kind-type-alias">AdvancedSearch</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_applysearchkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">|</span> <a href="../types/repository_types.AdvancedSearch.html" class="tsd-signature-type tsd-kind-type-alias">AdvancedSearch</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_applysearchkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">void</span><a href="#_applysearch-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Applies advanced search criteria to a Knex.js query builder. This method supports complex queries
using operators like <code>$eq</code>, <code>$neq</code>, <code>$lt</code>, <code>$lte</code>, <code>$gt</code>, <code>$gte</code>, <code>$in</code>, <code>$nin</code>, <code>$between</code>, <code>$nbetween</code>,
<code>$like</code>, <code>$nlike</code>, and <code>$isNull</code>. It also supports basic string searches and field selection.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="_applysearchkmodel"><span class="tsd-kind-type-parameter">KModel</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to search for.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">query</span>: <span class="tsd-signature-type">QueryBuilder</span></span><div class="tsd-comment tsd-typography"><p>The Knex.js query builder to apply the search criteria to. (Knex.QueryBuilder)</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">search</span>: <a href="../types/repository_types.AdvancedSearch.html" class="tsd-signature-type tsd-kind-type-alias">AdvancedSearch</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_applysearchkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">|</span> <a href="../types/repository_types.AdvancedSearch.html" class="tsd-signature-type tsd-kind-type-alias">AdvancedSearch</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_applysearchkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>The advanced search criteria to apply. Can be a single object or an array of objects. (<a href="../types/repository_types.AdvancedSearch.html" class="tsd-kind-type-alias">AdvancedSearch</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L500">source/repository/repository.ts:500</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="_executequery"><code class="tsd-tag">Protected</code><span>_<wbr/>execute<wbr/>Query</span><a href="#_executequery" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class=""><div class="tsd-signature tsd-anchor-link" id="_executequery-1"><span class="tsd-kind-call-signature">_executeQuery</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_executequerykmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">query</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">QueryBuilder</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">throwIfNoResult</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_executequerykmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#_executequery-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Executes a Knex.js query and returns the result. This method provides centralized
error handling and supports the option to throw an error if no records are found.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="_executequerykmodel"><span class="tsd-kind-type-parameter">KModel</span></span><div class="tsd-comment tsd-typography"><p>The type of the records returned by the query.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">query</span>: <span class="tsd-signature-type">QueryBuilder</span></span><div class="tsd-comment tsd-typography"><p>The Knex.js query builder to execute.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">throwIfNoResult</span>: <span class="tsd-signature-type">boolean</span><span class="tsd-signature-symbol"> = false</span></span><div class="tsd-comment tsd-typography"><p>Whether to throw an error if no records are found.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#_executequerykmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An array of records returned by the query.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws">Throws<a href="#throws" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if no records are found and the <code>throwIfNoResult</code> option is enabled. (<a href="../variables/database.databaseKeyError.html#mssqlnoresult" class="tsd-kind-property">databaseKeyError.mssqlNoResult</a>)</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-1">Throws<a href="#throws-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L607">source/repository/repository.ts:607</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member tsd-is-protected"><h3 class="tsd-anchor-link" id="_handleerror"><code class="tsd-tag">Protected</code><span>_<wbr/>handle<wbr/>Error</span><a href="#_handleerror" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures tsd-is-protected"><li class=""><div class="tsd-signature tsd-anchor-link" id="_handleerror-1"><span class="tsd-kind-call-signature">_handleError</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">error</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">unknown</span><span class="tsd-signature-symbol">,</span> <span class="tsd-kind-parameter">query</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">QueryBuilder</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">never</span><a href="#_handleerror-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Handles errors that occur during query execution. This method centralizes error handling
for MSSQL-specific errors and throws a <a href="error.CoreError.html" class="tsd-kind-class">CoreError</a> with relevant information.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">error</span>: <span class="tsd-signature-type">unknown</span></span><div class="tsd-comment tsd-typography"><p>The error object thrown by Knex.js.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">query</span>: <span class="tsd-signature-type">QueryBuilder</span></span><div class="tsd-comment tsd-typography"><p>The Knex.js query builder that caused the error.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">never</span></h4><p>Never returns, always throws an error.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-2">Throws<a href="#throws-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L549">source/repository/repository.ts:549</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="count"><span>count</span><a href="#count" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="count-1"><span class="tsd-kind-call-signature">count</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#countkmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#countkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;selectedFields&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span><a href="#count-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Counts the number of records in the database based on the specified query options.
This method supports advanced search capabilities to filter the records before counting.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="countkmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to count.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#countkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;selectedFields&quot;</span><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the search. (<a href="../interfaces/repository_types.QueryOptions.html" class="tsd-kind-interface">QueryOptions</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">&gt;</span></h4><p>The count of records matching the query options.</p>
<h3 id="usage-examples" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-3">Throws<a href="#throws-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if no records are found and the <code>throwIfNoResult</code> option is enabled. (<a href="../variables/database.databaseKeyError.html#mssqlnoresult" class="tsd-kind-property">databaseKeyError.mssqlNoResult</a>)</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-4">Throws<a href="#throws-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example">Example<a href="#example" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">userCount</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">count</span><span class="hl-1">();</span><br/><br/><span class="hl-8">// With advanced filtering</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">activeUserCount</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">count</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">status:</span><span class="hl-1"> </span><span class="hl-6">&#39;active&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">userCount</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">count</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">department:</span><span class="hl-1"> </span><span class="hl-6">&#39;finance&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L348">source/repository/repository.ts:348</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="delete"><span>delete</span><a href="#delete" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="delete-1"><span class="tsd-kind-call-signature">delete</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>        <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#delete-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Deletes records from the database based on the specified query options and returns the deleted records.
This method supports advanced search capabilities to filter the records before deletion.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="deletekmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to delete.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>    <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the deletion. (<a href="../interfaces/repository_types.QueryOptions.html" class="tsd-kind-interface">QueryOptions</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#deletekmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An array of deleted records.</p>
<h3 id="usage-examples-1" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-5">Throws<a href="#throws-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-1">Example<a href="#example-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">deletedUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">delete</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With advanced filtering</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">deletedUsers</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">delete</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">status:</span><span class="hl-1"> </span><span class="hl-6">&#39;inactive&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">deletedUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">delete</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L481">source/repository/repository.ts:481</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="find"><span>find</span><a href="#find" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="find-1"><span class="tsd-kind-call-signature">find</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findkmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/repository_types.QueryOptionsExtendPagination.html" class="tsd-signature-type tsd-kind-interface">QueryOptionsExtendPagination</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#find-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Finds records in the database based on the specified query options and returns the results
as an array. This method supports comprehensive filtering, pagination, field selection, and sorting
to provide flexible data retrieval capabilities.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="findkmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to retrieve.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/repository_types.QueryOptionsExtendPagination.html" class="tsd-signature-type tsd-kind-interface">QueryOptionsExtendPagination</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the search. (<a href="../interfaces/repository_types.QueryOptionsExtendPagination.html" class="tsd-kind-interface">QueryOptionsExtendPagination</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An array of records matching the query options. (<a href="#findkmodel" class="tsd-kind-type-parameter">KModel</a>)</p>
<h3 id="usage-examples-2" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-6">Throws<a href="#throws-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if no records are found and the <code>throwIfNoResult</code> option is enabled. (<a href="../variables/database.databaseKeyError.html#mssqlnoresult" class="tsd-kind-property">databaseKeyError.mssqlNoResult</a>)</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-7">Throws<a href="#throws-7" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-2">Example<a href="#example-2" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage with pagination</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">limit:</span><span class="hl-1"> </span><span class="hl-7">25</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">offset:</span><span class="hl-1"> </span><span class="hl-7">50</span><span class="hl-1">  </span><span class="hl-8">// Get users 51-75</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With field selection</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">userNames</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">selectedFields:</span><span class="hl-1"> [</span><span class="hl-6">&#39;id&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;firstName&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;lastName&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With advanced filtering</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">activeAdmins</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">role:</span><span class="hl-1"> </span><span class="hl-6">&#39;admin&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">status:</span><span class="hl-1"> { </span><span class="hl-4">$eq:</span><span class="hl-1"> </span><span class="hl-6">&#39;active&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">lastLogin:</span><span class="hl-1"> { </span><span class="hl-4">$gte:</span><span class="hl-1"> </span><span class="hl-0">new</span><span class="hl-1"> </span><span class="hl-3">Date</span><span class="hl-1">(</span><span class="hl-6">&#39;2023-01-01&#39;</span><span class="hl-1">) }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With OR conditions</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">results</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> [</span><br/><span class="hl-1">    { </span><span class="hl-4">department:</span><span class="hl-1"> </span><span class="hl-6">&#39;engineering&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">    { </span><span class="hl-4">department:</span><span class="hl-1"> </span><span class="hl-6">&#39;design&#39;</span><span class="hl-1">, </span><span class="hl-4">role:</span><span class="hl-1"> </span><span class="hl-6">&#39;lead&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With sorting</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">sortedUsers</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">orderBy:</span><span class="hl-1"> [</span><span class="hl-6">&#39;lastName&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;asc&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">find</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">department:</span><span class="hl-1"> </span><span class="hl-6">&#39;finance&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">    </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L231">source/repository/repository.ts:231</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="findone"><span>find<wbr/>One</span><a href="#findone" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="findone-1"><span class="tsd-kind-call-signature">findOne</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>        <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><a href="#findone-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Finds a single record in the database based on the specified query options and returns the result.
This method supports comprehensive filtering, field selection, and sorting to provide flexible data retrieval capabilities.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="findonekmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to retrieve.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>    <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the search. (<a href="../interfaces/repository_types.QueryOptionsExtendPagination.html" class="tsd-kind-interface">QueryOptionsExtendPagination</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findonekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span></h4><p>A single record matching the query options. (<a href="#findonekmodel" class="tsd-kind-type-parameter">KModel</a>)</p>
<h3 id="usage-examples-3" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-8">Throws<a href="#throws-8" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if no records are found and the <code>throwIfNoResult</code> option is enabled. (<a href="../variables/database.databaseKeyError.html#mssqlnoresult" class="tsd-kind-property">databaseKeyError.mssqlNoResult</a>)</p>
</div><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-9">Throws<a href="#throws-9" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-3">Example<a href="#example-3" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findOne</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With field selection</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findOne</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">selectedFields:</span><span class="hl-1"> [</span><span class="hl-6">&#39;id&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;firstName&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;lastName&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With advanced filtering</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findOne</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">role:</span><span class="hl-1"> </span><span class="hl-6">&#39;admin&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">status:</span><span class="hl-1"> { </span><span class="hl-4">$eq:</span><span class="hl-1"> </span><span class="hl-6">&#39;active&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With sorting</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findOne</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">orderBy:</span><span class="hl-1"> [</span><span class="hl-6">&#39;lastName&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;asc&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findOne</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">department:</span><span class="hl-1"> </span><span class="hl-6">&#39;finance&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L299">source/repository/repository.ts:299</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="findstream"><span>find<wbr/>Stream</span><a href="#findstream" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="findstream-1"><span class="tsd-kind-call-signature">findStream</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findstreamkmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <a href="../interfaces/repository_types.QueryOptionsExtendStream.html" class="tsd-signature-type tsd-kind-interface">QueryOptionsExtendStream</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findstreamkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <a href="../types/utils_types.StreamWithAsyncIterable.html" class="tsd-signature-type tsd-kind-type-alias">StreamWithAsyncIterable</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findstreamkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#findstream-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Finds records in the database based on the specified query options and returns a stream
for async iteration. This method is particularly useful when working with large datasets
that would be inefficient to load entirely into memory.</p>
<p>The stream emits data events for each record and an end event when the stream is finished.
It can be consumed using either async iteration or event listeners.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="findstreamkmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to retrieve.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a href="../interfaces/repository_types.QueryOptionsExtendStream.html" class="tsd-signature-type tsd-kind-interface">QueryOptionsExtendStream</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findstreamkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the search. (<a href="../interfaces/repository_types.QueryOptionsExtendStream.html" class="tsd-kind-interface">QueryOptionsExtendStream</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../types/utils_types.StreamWithAsyncIterable.html" class="tsd-signature-type tsd-kind-type-alias">StreamWithAsyncIterable</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#findstreamkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>A stream with an async iterable interface for consuming the results. (<a href="../types/utils_types.StreamWithAsyncIterable.html" class="tsd-kind-type-alias">StreamWithAsyncIterable</a>)</p>
<h3 id="usage-examples-4" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-4">Example<a href="#example-4" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage with async iteration</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findStream</span><span class="hl-1">();</span><br/><span class="hl-5">for</span><span class="hl-1"> </span><span class="hl-5">await</span><span class="hl-1"> (</span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">user</span><span class="hl-1"> </span><span class="hl-0">of</span><span class="hl-1"> </span><span class="hl-4">stream</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-8">// With ordering and field selection</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findStream</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">selectedFields:</span><span class="hl-1"> [</span><span class="hl-6">&#39;id&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;name&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;email&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">orderBy:</span><span class="hl-1"> [</span><span class="hl-6">&#39;createdDate&#39;</span><span class="hl-1">, </span><span class="hl-6">&#39;desc&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using event listeners</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findStream</span><span class="hl-1">();</span><br/><span class="hl-4">stream</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;data&#39;</span><span class="hl-1">, (</span><span class="hl-4">user</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">&#39;User:&#39;</span><span class="hl-1">, </span><span class="hl-4">user</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-4">stream</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;error&#39;</span><span class="hl-1">, (</span><span class="hl-4">error</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">error</span><span class="hl-1">(</span><span class="hl-6">&#39;Stream error:&#39;</span><span class="hl-1">, </span><span class="hl-4">error</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><span class="hl-4">stream</span><span class="hl-1">.</span><span class="hl-3">on</span><span class="hl-1">(</span><span class="hl-6">&#39;end&#39;</span><span class="hl-1">, () </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><span class="hl-6">&#39;Stream completed&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With transform function to process records</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">stream</span><span class="hl-1"> = </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">findStream</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-3">transform</span><span class="hl-4">:</span><span class="hl-1"> (</span><span class="hl-4">chunk</span><span class="hl-1">, </span><span class="hl-4">encoding</span><span class="hl-1">, </span><span class="hl-4">callback</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">// Transform the data</span><br/><span class="hl-1">    </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">transformedData</span><span class="hl-1"> = { ...</span><span class="hl-4">chunk</span><span class="hl-1">, </span><span class="hl-4">processed:</span><span class="hl-1"> </span><span class="hl-0">true</span><span class="hl-1"> };</span><br/><span class="hl-1">    </span><span class="hl-3">callback</span><span class="hl-1">(</span><span class="hl-0">null</span><span class="hl-1">, </span><span class="hl-4">transformedData</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L138">source/repository/repository.ts:138</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="insert"><span>insert</span><a href="#insert" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="insert-1"><span class="tsd-kind-call-signature">insert</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">data</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#insert-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Inserts new records into the database and returns the inserted records.
This method supports bulk insertion of multiple records at once.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="insertkmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to insert.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">data</span>: <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>The data to insert. Can be a single object or an array of objects.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the insertion. (<a href="../interfaces/repository_types.QueryOptions.html" class="tsd-kind-interface">QueryOptions</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#insertkmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An array of inserted records.</p>
<h3 id="usage-examples-5" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-10">Throws<a href="#throws-10" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-5">Example<a href="#example-5" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">newUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">insert</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;John Doe&#39;</span><span class="hl-1">, </span><span class="hl-4">email:</span><span class="hl-1"> </span><span class="hl-6">&#39;john.doe@example.com&#39;</span><span class="hl-1"> });</span><br/><br/><span class="hl-8">// With bulk insertion</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">users</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">insert</span><span class="hl-1">([</span><br/><span class="hl-1">  { </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;Jane Doe&#39;</span><span class="hl-1">, </span><span class="hl-4">email:</span><span class="hl-1"> </span><span class="hl-6">&#39;jane.doe@example.com&#39;</span><span class="hl-1"> },</span><br/><span class="hl-1">  { </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;John Smith&#39;</span><span class="hl-1">, </span><span class="hl-4">email:</span><span class="hl-1"> </span><span class="hl-6">&#39;john.smith@example.com&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">]);</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">newUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">insert</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;John Doe&#39;</span><span class="hl-1">, </span><span class="hl-4">email:</span><span class="hl-1"> </span><span class="hl-6">&#39;john.doe@example.com&#39;</span><span class="hl-1"> }, {</span><br/><span class="hl-1">      </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L390">source/repository/repository.ts:390</a></li></ul></aside></div></li></ul></section><section class="tsd-panel tsd-member"><h3 class="tsd-anchor-link" id="update"><span>update</span><a href="#update" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class=""><div class="tsd-signature tsd-anchor-link" id="update-1"><span class="tsd-kind-call-signature">update</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a> <span class="tsd-signature-symbol">=</span> <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><br/>    <span class="tsd-kind-parameter">data</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>        <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/>    <span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span><a href="#update-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></div><div class="tsd-description"><div class="tsd-comment tsd-typography"><p>Updates existing records in the database based on the specified query options and returns the updated records.
This method supports advanced search capabilities to filter the records before updating.</p>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span id="updatekmodel"><span class="tsd-kind-type-parameter">KModel</span> = <span class="tsd-signature-type">NoInfer</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#constructorrepositorytmodel">TModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The type of the object to update.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">data</span>: <span class="tsd-signature-type">Partial</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The data to update. Can be a single object or an array of objects.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">options</span>: <span class="tsd-signature-type">Omit</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;orderBy&quot;</span> <span class="tsd-signature-symbol">|</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span> <span class="tsd-signature-symbol">&amp;</span> <span class="tsd-signature-type">Required</span><span class="tsd-signature-symbol">&lt;</span><br/>    <span class="tsd-signature-type">Pick</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/repository_types.QueryOptions.html" class="tsd-signature-type tsd-kind-interface">QueryOptions</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span> <span class="tsd-signature-type">&quot;advancedSearch&quot;</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">,</span><br/><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>The query options to apply to the update. (<a href="../interfaces/repository_types.QueryOptions.html" class="tsd-kind-interface">QueryOptions</a>)</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="#updatekmodel">KModel</a><span class="tsd-signature-symbol">[]</span><span class="tsd-signature-symbol">&gt;</span></h4><p>An array of updated records.</p>
<h3 id="usage-examples-6" class="tsd-anchor-link">Usage Examples:<a href="#usage-examples-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-comment tsd-typography"><div class="tsd-tag-throws"><h4 class="tsd-anchor-link" id="throws-11">Throws<a href="#throws-11" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p>(<a href="error.CoreError.html" class="tsd-kind-class">CoreError</a>) Throws an error if an MSSQL-specific error occurs during the query execution. (<a href="../variables/database.databaseKeyError.html" class="tsd-kind-variable">databaseKeyError</a>)</p>
</div><div class="tsd-tag-example"><h4 class="tsd-anchor-link" id="example-6">Example<a href="#example-6" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><pre><code class="typescript"><span class="hl-8">// Basic usage</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">updatedUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">update</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;John Doe&#39;</span><span class="hl-1"> }, {</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// With advanced filtering</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">updatedUsers</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">update</span><span class="hl-1">({ </span><span class="hl-4">status:</span><span class="hl-1"> </span><span class="hl-6">&#39;inactive&#39;</span><span class="hl-1"> }, {</span><br/><span class="hl-1">  </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">role:</span><span class="hl-1"> </span><span class="hl-6">&#39;admin&#39;</span><span class="hl-1"> }</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-8">// Using a transaction</span><br/><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">knex</span><span class="hl-1">.</span><span class="hl-3">transaction</span><span class="hl-1">(</span><span class="hl-0">async</span><span class="hl-1"> (</span><span class="hl-4">trx</span><span class="hl-1">) </span><span class="hl-0">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-2">updatedUser</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-4">userRepository</span><span class="hl-1">.</span><span class="hl-3">update</span><span class="hl-1">({ </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-6">&#39;John Doe&#39;</span><span class="hl-1"> }, {</span><br/><span class="hl-1">      </span><span class="hl-4">advancedSearch:</span><span class="hl-1"> { </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-7">1</span><span class="hl-1"> },</span><br/><span class="hl-1">      </span><span class="hl-4">transaction:</span><span class="hl-1"> </span><span class="hl-4">trx</span><br/><span class="hl-1">  });</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MRX-Systems/MRX-Core/blob/a76f68794f271b6b561ac40439d4264d50e10b75/source/repository/repository.ts#L435">source/repository/repository.ts:435</a></li></ul></aside></div></li></ul></section></section></details></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg><h3>On This Page</h3></summary><div class="tsd-accordion-details"><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Constructors"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Constructors</summary><div><a href="#constructor"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Constructor"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Properties"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Properties</summary><div><a href="#_knex" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>_<wbr/>knex</span></a><a href="#_table" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Property"><use href="../assets/icons.svg#icon-1024"></use></svg><span>_<wbr/>table</span></a></div></details><details open class="tsd-accordion tsd-page-navigation-section"><summary class="tsd-accordion-summary" data-key="section-Methods"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Methods</summary><div><a href="#_applysearch" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>apply<wbr/>Search</span></a><a href="#_executequery" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>execute<wbr/>Query</span></a><a href="#_handleerror" class="tsd-is-protected"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>_<wbr/>handle<wbr/>Error</span></a><a href="#count"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>count</span></a><ul><li><ul><li><ul><li><a href="#usage-examples"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#delete"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>delete</span></a><ul><li><ul><li><ul><li><a href="#usage-examples-1"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#find"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find</span></a><ul><li><ul><li><ul><li><a href="#usage-examples-2"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#findone"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find<wbr/>One</span></a><ul><li><ul><li><ul><li><a href="#usage-examples-3"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#findstream"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>find<wbr/>Stream</span></a><ul><li><ul><li><ul><li><a href="#usage-examples-4"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#insert"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>insert</span></a><ul><li><ul><li><ul><li><a href="#usage-examples-5"><span>Usage <wbr/>Examples:</span></a></li></ul></li></ul></li></ul><a href="#update"><svg class="tsd-kind-icon" viewBox="0 0 24 24" aria-label="Method"><use href="../assets/icons.svg#icon-2048"></use></svg><span>update</span></a><ul><li><a href="#usage-examples-6"><span>Usage <wbr/>Examples:</span></a></li></ul></div></details></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">@mrxsys/mrx-core</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
